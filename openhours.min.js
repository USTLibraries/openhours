/** @preserve OPENHOURS: VIEW DOC|CODE|LIC @ github.com/ustlibraries/openhours */
!function(e){var t="0.1.3-2017.01.13-01",n="github.com/ustlibraries/openhours",o="OPENHOURS",a="Open Hours",s=!1,r="",i={},d="-06:00",c=function(e){if(!s){var t=new Date,n=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds();console.log(o+" ["+n+"] : "+e)}},u=function(e){e?(c("Silenced"),s=!0):(s=!1,c("Unsilenced"))},l=function(e){i=e},p=function(e){r=e},f=function(e){d=e},g=function(){e("#openhours div[data-openhours-location]").each(function(){m(e(this))})},m=function(t){var n=e(t).attr("data-openhours-location");c("Getting hours for: "+n),e(t).html("-");var o=new Date,a=o.getMonth(),s=o.getDate(),r=o.getFullYear(),u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=1;e(t).hasClass("dailyHours")&&(l=7);var p=gapi.client.calendar.events.list({calendarId:i[n],timeMin:new Date(r,a,s).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:l,orderBy:"startTime"});p.execute(function(a){var s=a.items,r=document.createTextNode("No Hours Listed");if(e(t).html(""),s.length>0)for(var i=0;i<s.length;i++){var l=document.createElement("span"),p=s[i],f=p.start.dateTime,g=p.end.dateTime;f||(f=p.start.date+"T00:00:00"+d),g||(g=p.start.date+"T23:59:00"+d);var m=new Date(f),h=new Date(g);c(n+" Event: "+f+" - "+g);var v=u[m.getDay()]+" "+(m.getMonth()+1)+"/"+m.getDate();v+=m.getDate()===o.getDate()&&h.getTime()<o.getTime()?" - Closed for the day":" - "+p.summary,r=document.createTextNode(v),e(l).append(r),e(t).append(l)}else{var l=document.createElement("span");e(l).append(r),e(t).append(l)}})};e.fn.openhours=function(e,t){switch(e.toLowerCase()){case"load":""!==r&&Object.keys(i).length>0?(gapi.client.setApiKey(r),gapi.client.load("calendar","v3").then(g)):(s=!1,c("Google Calendar API Key and Calendar(s) not set! Please read Open Hours doc for more information."));break;case"config":"undefined"!=typeof t.silence&&u(t.silence),"undefined"!=typeof t.calendar&&l(t.calendar),"undefined"!=typeof t.apiKey&&p(t.apiKey),"undefined"!=typeof t.timeOffset&&f(t.timeOffset);break;case"debug":"undefined"!=typeof t.message&&c(t.message);break;default:c("Unknown Command for openhours(): "+e)}},c("Loaded "+a+" ("+n+") [ver"+t+"]")}(jQuery);var init_openhours=function(){$(document).openhours("debug",{message:"Load called"}),$("#openhours").openhours("load")};$(document).ready(function(){if($("#openhours").size()){$(document).openhours("debug",{message:"Placeholder for Open Hours Found"});var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://apis.google.com/js/client.js?onload=init_openhours",e.parentNode.insertBefore(t,e)}});